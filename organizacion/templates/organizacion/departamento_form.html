{% extends "base_admin.html" %} 
{% load static %}

{% block content %}
    {# Determinar si es Creación o Edición para el título #}
    {% if object %}
        <h2 class="text-warning">Editar Departamento: {{ object.departamento }}</h2>
    {% else %}
        <h2 class="text-primary">Crear Nuevo Departamento</h2>
    {% endif %}

    <div class="card shadow mb-5">
        <div class="card-body">
            
            <form method="POST">
                {% csrf_token %}
                
                {# Iterar sobre los campos para aplicar el estilo 'form-control' #}
                {% for field in form %}
                    <div style="margin-bottom: 20px;">
                        <label for="{{ field.id_for_label }}">{{ field.label }}:</label>
                        {{ field }}
                        
                        {% if field.errors %}
                            <div class="alert alert-danger mt-5">
                                {{ field.errors }}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
                
                {# Script para forzar la clase form-control si no se añadió en forms.py/views.py #}
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const inputs = document.querySelectorAll('input, select, textarea');
                        inputs.forEach(input => {
                            if (!input.classList.contains('form-control')) {
                                input.classList.add('form-control');
                            }
                        });
                    });
                </script>

                {# Botones de acción #}
                <button type="submit" class="btn {% if object %}btn-warning{% else %}btn-primary{% endif %} mt-3">
                    {% if object %}Guardar Cambios{% else %}Crear Departamento{% endif %}
                </button>
                
                <a href="{% url 'organizacion:departamento_list' %}" class="btn btn-secondary mt-3 ml-2">
                    Cancelar
                </a>
            </form>
            
        </div>
    </div>
{% endblock content %}